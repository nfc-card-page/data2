<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>پنل ادمین</title>
<style>
/* تمام CSS قبلی بدون تغییر */
</style>
</head>
<body>
<div class="container">
    <a href="index.html" class="back-btn">← بازگشت به صفحه اصلی</a>
    <h1>پنل ادمین</h1>

    <button id="loadUsers" class="btn btn-primary">نمایش همه کاربران</button>
    <button id="clearUsers" class="btn btn-primary" style="margin-top:10px;background:red;">پاک کردن همه داده‌ها</button>

    <div id="userList" style="margin-top:20px;"></div>
</div>

<script>
const WORKER_URL = 'https://user-data-api.clad90093.workers.dev';

document.getElementById('loadUsers').addEventListener('click', async () => {
    try {
        const res = await fetch(`${WORKER_URL}/list`);
        const users = await res.json();
        const listDiv = document.getElementById('userList');
        listDiv.innerHTML = users.map(u => `
            <div class="diet-item">
                <p>نام کاربری: ${u.username}</p>
                <p>سن: ${u.age}</p>
                <p>جنسیت: ${u.gender}</p>
                <p>قد: ${u.height} cm</p>
                <p>وزن: ${u.weight} kg</p>
            </div>
        `).join('');
    } catch (err) {
        console.error(err);
        alert('خطا در دریافت داده‌ها');
    }
});

document.getElementById('clearUsers').addEventListener('click', async () => {
    if (!confirm('آیا مطمئن هستید که می‌خواهید همه داده‌ها پاک شود؟')) return;
    try {
        const res = await fetch(`${WORKER_URL}/clear`, { method: 'DELETE' });
        if (res.ok) {
            document.getElementById('userList').innerHTML = '';
            alert('داده‌ها پاک شد');
        }
    } catch (err) {
        console.error(err);
        alert('خطا در پاک کردن داده‌ها');
    }
});
</script>
</body>
</html>
